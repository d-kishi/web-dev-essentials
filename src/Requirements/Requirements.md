# ECサイト商品管理システム 要件定義書

## 概要

.NET 8 MVCを使用したECサイトの商品管理機能の基礎教育用アプリケーション開発のための要件定義書。クリーンアーキテクチャとモダンなフロントエンド技術の学習を目的とした、実践的な教育プロジェクトです。

## 要件定義書一覧

### 🔴 実装必須（高優先度）
- **[アーキテクチャ設計](./Architecture.md)** - クリーンアーキテクチャ構成とプロジェクト分割
- **[技術ガイドライン](./TechnicalGuidelines.md)** - コーディング方針と単一責任の原則
- **[JavaScript実装](./JavaScript.md)** - Pure JavaScript、RxJS、Ajax実装方針
- **[実装チェックリスト](./ImplementationChecklist.md)** - 実装時の確認項目

### 🟡 機能詳細（中優先度）  
- **[データベース設計](./Database.md)** - DB設計とEntity Framework設定
- **[API仕様](./API.md)** - コントローラーとAPI設計

### 🟢 詳細仕様（後回し可能）
- 商品管理機能詳細 (未作成)
- カテゴリ管理機能詳細 (未作成) 
- 画像アップロード仕様 (未作成)
- View・コンポーネント設計 (未作成)

## 目次

- [1. プロジェクト概要](#1-プロジェクト概要)
- [2. 技術要件](#2-技術要件)
- [3. 機能要件](#3-機能要件)
- [4. 非機能要件](#4-非機能要件)
- [5. 学習重点項目](#5-学習重点項目)
- [6. 画面構成](#6-画面構成)
- [7. データモデル](#7-データモデル)

---

## 1. プロジェクト概要

### 1.1 目的
.NET MVCを使用したECサイトの商品管理機能の基礎教育用アプリケーションの開発

### 1.2 対象者
- 経験年数3年程度のC#エンジニア（C# 7.3, .NET Framework 4 経験）
- フロントエンド技術（HTML, JavaScript, CSS）の知識がない初級者〜中級者

### 1.3 教育目標
- C# 8.0～11の新機能の習得（.NET 8対応）
- フロントエンド技術（HTML, JavaScript, CSS）の基礎習得
- MVC アーキテクチャの理解（特にController、Validation）
- **クリーンアーキテクチャの基礎理解**
- Pure JavaScriptでのAjax通信の理解（Fetch API使用）

## 2. 技術要件

### 2.1 フレームワーク・ライブラリ
- **.NET 8**
- **Entity Framework Core**（InMemoryデータベースプロバイダー使用）
- **RxJS**（API通信用）
- **Fetch API**（HTTP通信用）
- **Pure JavaScript**（jQueryは使用禁止）

### 2.2 アーキテクチャ・プロジェクト構成
**詳細は [アーキテクチャ設計](./Architecture.md) を参照**

- **MVC パターン**
- **クリーンアーキテクチャ**（教育用サンプル）
- **3プロジェクト構成**: Domain, Infrastructure, App
- **ルートネームスペース**: `Web.Essentials`
- **ソリューション名**: `Web.Essentials.sln`

### 2.3 開発環境
- **VSCode**（メイン開発環境）
- **Visual Studio 2022**（互換性確保）

## 3. 機能要件

### 3.1 商品管理機能

#### 3.1.1 商品登録機能
- 商品情報の新規登録
- 商品画像のアップロード機能
- バリデーション機能

#### 3.1.2 商品編集機能
- 既存商品情報の編集
- 商品画像の変更・削除

#### 3.1.4 商品画像管理機能（詳細仕様）
**メイン画像の管理**
- 各商品で1つのメイン画像を設定可能
- メイン画像は商品一覧・詳細画面で最初に表示される
- メイン画像には「メイン」バッジを表示

**画像削除の状態管理**
- 編集画面での画像削除は論理削除（非表示処理）
- 削除済み画像は画面上で非表示となるが、サーバー送信までは復元可能
- 物理ファイルは保持し、データベースレコードのみ削除

**画像編集機能**
- 代替テキスト（アクセシビリティ対応）の編集
- メイン画像の設定・変更
- 画像の拡大表示（モーダル表示）

**商品登録・編集画面での統一仕様**
- 画像表示レイアウトは統一されたPartialView（`_ImageItem.cshtml`）を使用
- ホバー時のアイコン表示：編集（✏️）、削除（🗑️）、拡大（🔍）
- 既存画像と新規アップロード画像で異なる表示スタイルを適用

#### 3.1.3 商品一覧機能
- 商品一覧の表示
- **検索機能**（Ajax通信使用）
- **ページング機能**（Ajax通信使用）
- 画面反映はAjax結果を使用

### 3.2 商品カテゴリ管理機能

#### 3.2.1 カテゴリ登録機能
- カテゴリ情報の新規登録
- バリデーション機能

#### 3.2.2 カテゴリ編集機能
- 既存カテゴリ情報の編集

#### 3.2.3 カテゴリ一覧機能
- カテゴリ一覧の表示
- **検索機能**（Ajax通信使用）
- **ページング機能**（Ajax通信使用）

## 4. 非機能要件

### 4.1 認証・認可
- **認証機能は不要**

### 4.2 データベース
- **Entity Framework Core InMemoryデータベースプロバイダー**使用
- 教育目的のため、永続化は不要

### 4.3 ファイル管理
- 商品画像のアップロード・保存機能

## 5. 学習重点項目
1. **フロントエンド技術**（HTML, JavaScript, CSS）- 最重要
2. **Controller** - 重要
3. **Validation** - 重要
4. **クリーンアーキテクチャ** - 重要
5. **Model** - 基本レベル

## 6. 画面構成

### 6.1 商品管理画面群
- 商品一覧画面（検索・ページング機能付き）
- 商品登録画面
- 商品編集画面

### 6.2 カテゴリ管理画面群
- カテゴリ一覧画面（検索・ページング機能付き）
- カテゴリ登録画面
- カテゴリ編集画面

### 6.3 View設計基本方針
**詳細は [View・コンポーネント設計](./ViewComponents.md) を参照（未作成）**

- **DRY原則の徹底**：Create、Edit、Delete画面の共通部分をコンポーネント化
- **Partial View活用**：共通UIコンポーネントを部分ビューとして分離
- **再利用可能なフォーム要素**：入力フィールド、ボタン、バリデーション表示等の共通化

## 7. データモデル

### 7.1 データモデル概要
**詳細は [データベース設計](./Database.md) を参照**

- **商品エンティティ**: ID、名前、説明、価格、JANコード、ステータス等
- **カテゴリエンティティ**: ID、名前、説明、階層構造（3階層）  
- **商品カテゴリ関連**: 多対多の関連テーブル
- **商品画像エンティティ**: 商品に対する複数画像（最大5枚）

---

## 技術的制約・方針

**詳細なコーディング規約と実装方針は [技術ガイドライン](./TechnicalGuidelines.md) を参照**

### JavaScript関連制約
- **Pure JavaScript使用**（jQueryは使用禁止）
- **RxJS使用**（API通信でのみ）
- **単一責任の原則**：JavaScript、CSSのインライン記述禁止

### C#コーディング方針  
- **C# 8.0～11の新機能**を積極的に使用
- **詳細なコメント記載**（XMLドキュメント必須）
- **/// <inheritdoc />** でコメント重複管理を回避

### アーキテクチャ方針
- **クリーンアーキテクチャ**の基礎理解
- **依存関係逆転の原則**の実践
- **関心の分離**と**単一責任原則**の徹底