<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1920, initial-scale=1.0" />
    <title>@ViewData["Title"] - ECサイト商品管理システム</title>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/layout.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/components.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/forms.css" asp-append-version="true" />
    
    <!-- ページ固有のスタイル -->
    @await RenderSectionAsync("Styles", required: false)
    
    <!-- RxJS ライブラリ -->
    <environment include="Development">
        <script src="https://unpkg.com/rxjs@7.8.1/dist/bundles/rxjs.umd.min.js" defer></script>
    </environment>
    <environment exclude="Development">
        <script src="https://unpkg.com/rxjs@7.8.1/dist/bundles/rxjs.umd.min.js" 
                asp-fallback-src="~/lib/rxjs/rxjs.umd.min.js" 
                asp-fallback-test="window.rxjs" defer></script>
    </environment>
    
    <!-- 共通JavaScript -->
    <script src="~/js/common.js" asp-append-version="true" defer></script>
    <script src="~/js/ajax.js" asp-append-version="true" defer></script>
    <script src="~/js/components.js" asp-append-version="true" defer></script>
    <script src="~/js/category-hierarchy.js" asp-append-version="true" defer></script>
    
    <!-- ページ固有のスクリプト -->
    @await RenderSectionAsync("Scripts", required: false)
</head>
<body>
    <!-- Antiforgery Token -->
    @Html.AntiForgeryToken()
    
    <!-- ヘッダー -->
    <header class="main-header">
        <div class="header-container">
            <div class="header-logo">
                <a asp-action="Index" asp-controller="Home" class="logo-link">
                    <h1>ECサイト商品管理システム</h1>
                </a>
            </div>
            <nav class="header-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a asp-action="Index" asp-controller="Home" class="nav-link">ホーム</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle">商品管理</a>
                        <ul class="dropdown-menu">
                            <li><a asp-action="Index" asp-controller="Products" class="dropdown-link">商品一覧</a></li>
                            <li><a asp-action="Create" asp-controller="Products" class="dropdown-link">商品登録</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle">カテゴリ管理</a>
                        <ul class="dropdown-menu">
                            <li><a asp-action="Index" asp-controller="Categories" class="dropdown-link">カテゴリ一覧</a></li>
                            <li><a asp-action="Create" asp-controller="Categories" class="dropdown-link">カテゴリ登録</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- メッセージ表示エリア -->
    <partial name="_Messages" />

    <!-- メインコンテンツ -->
    <main class="main-content">
        <div class="content-container">
            @RenderBody()
        </div>
    </main>

    <!-- フッター -->
    <footer class="main-footer">
        <div class="footer-container">
            <p>&copy; 2024 ECサイト商品管理システム - Web開発基礎学習用アプリケーション</p>
        </div>
    </footer>

    <!-- 確認モーダル -->
    <partial name="_ConfirmationModal" />
</body>
</html>
