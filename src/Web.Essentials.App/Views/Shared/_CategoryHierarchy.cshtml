@model IEnumerable<Web.Essentials.App.ViewModels.CategoryTreeNodeViewModel>
<!-- ã‚«ãƒ†ã‚´ãƒªéšå±¤è¡¨ç¤ºéƒ¨åˆ†ãƒ“ãƒ¥ãƒ¼ -->
<!-- ãƒ„ãƒªãƒ¼æ§‹é€ ã§ã®éšå±¤è¡¨ç¤º -->
<!-- Index/Detailsç”»é¢ã§å…±é€šåˆ©ç”¨ -->

@{
    var categories = Model ?? new List<Web.Essentials.App.ViewModels.CategoryTreeNodeViewModel>();
    var showActions = ViewBag.ShowActions as bool? ?? true;
    var isSelectable = ViewBag.IsSelectable as bool? ?? false;
    var selectedId = ViewBag.SelectedId as int?;
    var showProductCount = ViewBag.ShowProductCount as bool? ?? true;
    var expandAll = ViewBag.ExpandAll as bool? ?? false;
    
    var hasCategories = categories.Any();
}

<div class="category-hierarchy-container">
    @if (hasCategories)
    {
        <div class="category-tree">
            @foreach (var category in categories!)
            {
                <partial name="_CategoryTreeNode" model="category" />
            }
        </div>
    }
    else
    {
        <div class="no-categories-message">
            <div class="no-data-icon">ğŸ·ï¸</div>
            <p>ã‚«ãƒ†ã‚´ãƒªãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
        </div>
    }
</div>


<script defer>
    // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’JavaScriptã«æ¸¡ã™
    window.showCategoryActions = @Html.Raw(Json.Serialize(showActions));
    window.isCategorySelectable = @Html.Raw(Json.Serialize(isSelectable));
</script>

@section Styles {
    <link rel="stylesheet" href="~/css/category-hierarchy.css" asp-append-version="true" />
}